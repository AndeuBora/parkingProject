<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="adminQnaBoard">

	<!-- qna 글 목록 -->
	<select id="adminQnaBoardList" parameterType="com.parking.qnaBoard.vo.AdminQnaBoardVO"
		resultType="com.parking.qnaBoard.vo.AdminQnaBoardVO">
		select
		qnanum,
		qnatitle,
		to_char(qnawritedate, 'YYYY-MM-DD')
		as
		qnawritedate,
		memberId
		from (
		select list.*, rownum as rnum
		from (
		select
		qnanum, qnatitle,
		qnawritedate, memberId
		from
		qna
		order by
		qnawritedate desc
		) list
		)
		<where>
			<if test="start_row != null and start_row != ''">
				<if test="end_row != null and end_row != ''">
					rnum between #{start_row} and #{end_row}
				</if>
			</if>
		</where>
	</select>

	<!-- 전체 레코드 건수 -->
	<select id="adminQnaBoardCnt" parameterType="com.parking.qnaBoard.vo.AdminQnaBoardVO"
		resultType="int">
		select nvl(count(1),0) from
		( select list.*, rownum as rnum
		from (
		select qnanum, qnatitle, to_char(qnawritedate, 'YYYY-MM-DD'
		)
		as
		qnawritedate, memberId
		from qna
		order by
		qnawritedate
		desc
		) list
		)
	</select>

	<!-- qna 글 상세보기 -->
	<select id="adminQnaBoardDetail" parameterType="com.parking.qnaBoard.vo.AdminQnaBoardVO"
		resultType="com.parking.qnaBoard.vo.AdminQnaBoardVO">
		select
		qnanum,
		qnatitle,
		to_char(qnawritedate,
		'YYYY-MM-DD'
		)
		as qnawritedate,
		memberId,
		qnacontent
		from qna
		where qnanum =
		#{qnaNum}
	</select>

</mapper>
