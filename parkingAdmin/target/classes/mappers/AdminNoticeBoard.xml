<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="adminNoticeBoard">

	<!-- 공지사항 게시판 글 목록 -->
	<select id="adminNoticeBoardList" parameterType="com.parking.noticeBoard.vo.AdminNoticeBoardVO"
		resultType="com.parking.noticeBoard.vo.AdminNoticeBoardVO">
		select noticenum, noticetitle, to_char(noticewritedate, 'YYYY-MM-DD')
		as
		noticewritedate,
		adminid
		from (
		select list.*, rownum as rnum
		from (
		select noticenum, noticetitle, noticewritedate, adminid
		from notice
		order by
		noticewritedate desc
		) list
		)
		<where>
			<if test="start_row != null and start_row != ''">
				<if test="end_row != null and end_row != ''">
					rnum between #{start_row} and ${end_row}
				</if>
			</if>
		</where>
	</select>

	<!-- 전체 레코드 건수 -->
	<select id="adminNoticeBoardCnt" parameterType="com.parking.noticeBoard.vo.AdminNoticeBoardVO"
		resultType="int">
		select nvl(count(1),0) from
		( select list.*, rownum as rnum
		from (
		select noticenum, noticetitle, to_char(noticewritedate,
		'YYYY-MM-DD')
		as noticewritedate, adminid
		from notice
		order by
		noticewritedate desc
		) list
		)
	</select>

	<!-- 공지사항 게시판 글 등록 -->
	<insert id="adminNoticeBoardInsert" parameterType="com.parking.noticeBoard.vo.AdminNoticeBoardVO">
		INSERT INTO
		notice (noticenum, noticetitle, noticecontent, noticewritedate,
		adminid)
		VALUES(noticenum_seq.nextval, #{noticeTitle},
		#{noticeContent}, sysdate, #{adminId})
	</insert>

	<!-- 공지사항 게시판 글 상세보기 -->
	<select id="adminNoticeBoardDetail" parameterType="com.parking.noticeBoard.vo.AdminNoticeBoardVO"
		resultType="com.parking.noticeBoard.vo.AdminNoticeBoardVO">
		select
		noticenum,
		noticetitle,
		to_char(noticewritedate,
		'YYYY-MM-DD')
		as noticewritedate,
		adminid,
		noticecontent
		from notice
		where
		noticenum =
		#{noticeNum}
	</select>

	<!-- 공지사항 게시판 글 삭제하기 -->
	<delete id="adminNoticeBoardDelete" parameterType="com.parking.noticeBoard.vo.AdminNoticeBoardVO">
		delete from
		notice
		where
		noticenum = #{noticeNum}
	</delete>

	<!-- 공지사항 게시판 글 수정하기 -->
	<update id="adminNoticeBoardUpdate" parameterType="com.parking.noticeBoard.vo.AdminNoticeBoardVO">
		update notice
		set noticetitle = #{noticeTitle}
		,noticecontent = #{noticeContent}
		where noticenum = #{noticeNum}
	</update>

</mapper>
